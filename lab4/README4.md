# Лабораторна робота №4: Аналітичні SQL-запити (OLAP)

**Студент:** Михайло Савчук  
**Група:** ІО-45  
**Варіант:** 14 (Ігровий маркетплейс)

## 1. Мета роботи
Навчитися використовувати існуючу схему бази даних для написання аналітичних запитів (OLAP), що дозволяють підсумовувати тенденції та створювати звіти. Навчитися працювати з агрегатними функціями, групуванням даних та складними об'єднаннями таблиць.

## 2. Опис виконаних запитів

### Базова агрегація та групування (GROUP BY)
* **Агрегація за категоріями**: Використано функції `COUNT`, `SUM`, `AVG`, `MAX` для підрахунку статистики по кожній категорії товарів (Інструменти, Ресурси, Скіни).
* **Фільтрування груп (HAVING)**: Додано речення `HAVING` для відсіювання категорій, де сумарна вартість товарів менша за 100 грн, що дозволяє зосередитися на прибуткових сегментах.

### Операції JOIN
* **INNER JOIN**: Об'єднання таблиць `Users`, `Orders` та `Products` для виведення списку активних покупок з іменами гравців.
* **LEFT JOIN**: Виконано запит для виявлення користувачів, які ще не здійснили жодного замовлення (відображення `[null]` у стовпці `order_id`).
* **FULL OUTER JOIN**: Повне об'єднання даних для аналізу всіх записів у зв'язках користувач-замовлення.

### Підзапити (Subqueries)
* **Підзапит у WHERE**: Вибірка користувачів, чий баланс гаманця перевищує середнє значення по всій базі даних.
* **Підзапит у SELECT**: Обчислення відсоткової частки вартості кожного предмета від загальної суми вартості всіх товарів у маркетплейсі.
* **Підзапит у HAVING**: Фільтрація категорій, де максимальна ціна товару вища за середню ціну по всьому магазину.

## 3. Результати тестування (Скріншоти результатів)

### Статистика категорій (Агрегація + GROUP BY)
На скріншоті видно підрахунок кількості предметів та фінансових показників для кожної групи:
![Category Stats](../screens/1.png)

### Фільтрація прибуткових категорій (HAVING)
Демонстрація відсіювання категорій з низькою сумарною вартістю:
![Having Filter](../screens/2.png)

### Аналіз користувачів без замовлень (LEFT JOIN)
Виявлення потенційних клієнтів, які зареєстровані, але ще не купували товари:
![Join Analysis](../screens/3.png)

### Глибока аналітика та підзапити
Розрахунок долі кожного предмета в економіці маркетплейсу та пошук "багатих" гравців:
![Subquery Analysis](../screens/4.png)

## 4. Висновки
В ході лабораторної роботи було реалізовано понад 10 аналітичних запитів. Результати підтвердили коректність зв'язків у схемі та дозволили отримати важливі статистичні дані про стан ігрового маркетплейсу (найдорожчі товари, активність користувачів та розподіл цін).